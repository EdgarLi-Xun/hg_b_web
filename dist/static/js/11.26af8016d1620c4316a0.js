webpackJsonp([11],{1037:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-content"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-setting"}),e._v("系统设置")]),e._v(" "),a("el-breadcrumb-item",[e._v("类别设定")])],1)],1),e._v(" "),a("el-tabs",{attrs:{type:"border-card","active-name":e.GOO_CATE_NAME},on:{"tab-click":e.handleTabSwitch}},[a("el-tab-pane",{attrs:{label:"商品类别",name:e.GOO_CATE_NAME}},[a("el-col",{attrs:{span:20}},[a("el-tooltip",{attrs:{content:"选中单个类别可直接作为新增类别的父级",placement:"right-end",effect:"dark"}},[a("el-button",{attrs:{type:"info"},on:{click:e.addItemCate}},[e._v("添加类别")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.editChecked}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.deleteChecked}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.resetChecked}},[e._v("清空选择")]),e._v(" "),a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"cateTree",staticClass:"filter-tree",attrs:{data:e.itemCates,props:e.defaultProps,"show-checkbox":"","check-strictly":"",indent:50,"node-key":"id","default-expand-all":"","filter-node-method":e.filterNode}}),e._v(" "),a("el-dialog",{attrs:{title:e.cateDialogType,visible:e.handlerItemCateDialog,top:"20%"},on:{"update:visible":function(t){e.handlerItemCateDialog=t}}},[a("el-form",{attrs:{model:e.itemCateForm}},[a("el-form-item",{attrs:{label:"父 级：","label-width":"100px"}},[a("el-col",{attrs:{span:12}},[a("el-select",{attrs:{filterable:"",remote:"","remote-method":e.loadSearchData,placeholder:"请选择父级类别",clearable:""},on:{change:e.handlerSelect},model:{value:e.itemCateForm.parent.name,callback:function(t){e.$set(e.itemCateForm.parent,"name",t)},expression:"itemCateForm.parent.name"}},e._l(e.searchList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"索引：","label-width":"100px"}},[a("el-col",{attrs:{span:12}},[a("el-tooltip",{attrs:{content:"类别按索引值从大到小排序",placement:"right-end",effect:"dark"}},[a("el-input-number",{attrs:{min:1},model:{value:e.itemCateForm.sortIndex,callback:function(t){e.$set(e.itemCateForm,"sortIndex",t)},expression:"itemCateForm.sortIndex"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类别名称：","label-width":"100px"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:e.itemCateForm.name,callback:function(t){e.$set(e.itemCateForm,"name","string"==typeof t?t.trim():t)},expression:"itemCateForm.name"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.handlerItemCateDialog=!1}}},[e._v("我就看看")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handlerConfirm}},[e._v("just do it!")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"商品规格",name:e.GOO_ATTRIBUTE_NAME}},[e._v("商品规格")])],1)],1)},staticRenderFns:[]}},502:function(e,t,a){var r=a(194)(a(996),a(1037),null,null);e.exports=r.exports},996:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=1e3;t.default={data:()=>({GOO_CATE_NAME:"goo_cate",GOO_ATTRIBUTE_NAME:"goo_attribute",handlerItemCateDialog:!1,cateDialogType:"",filterText:"",itemCateForm:{id:null,parent:{id:null,name:null},name:null,sortIndex:1},itemCates:[{createdDate:152413943e4,updatedDate:152413943e4,id:1,parentId:0,name:"电影",sortIndex:1,isParent:!0,isDeleted:!1},{createdDate:1524139447e3,updatedDate:1524139447e3,id:2,parentId:0,children:[{createdDate:1524140017e3,updatedDate:1524140017e3,id:4,parentId:2,parentName:"小说",name:"mac",sortIndex:1,isParent:!1,isDeleted:!1}],name:"小说",sortIndex:1,isParent:!0,isDeleted:!1},{createdDate:1524139459e3,updatedDate:1524139459e3,id:3,parentId:0,name:"音乐",sortIndex:1,isParent:!0,isDeleted:!1}],defaultProps:{children:"children",label:"name"},searchList:[]}),watch:{filterText(e){this.$refs.cateTree.filter(e)},handlerItemCateDialog:{handler:function(){this.handlerItemCateDialog||this.resetCateDialog()},deep:!0}},methods:{loadSearchData(e){this.searchList=[{createdDate:1524140017e3,updatedDate:1524140017e3,id:4,parentId:2,parentName:"小说",name:"mac",sortIndex:1,isParent:!1,isDeleted:!1},{createdDate:1524139459e3,updatedDate:1524139459e3,id:3,parentId:0,name:"音乐",sortIndex:1,isParent:!0,isDeleted:!1},{createdDate:1524139447e3,updatedDate:1524139447e3,id:2,parentId:0,name:"小说",sortIndex:1,isParent:!0,isDeleted:!1},{createdDate:152413943e4,updatedDate:152413943e4,id:1,parentId:0,name:"电影",sortIndex:1,isParent:!0,isDeleted:!1}]},handleTabSwitch(e,t){let a=e.name;a==this.GOO_CATE_NAME||this.GOO_ATTRIBUTE_NAME},addItemCate(){var e=this.$refs.cateTree.getCheckedNodes();e.length>1?this.$message.error("选中的父级不能为多个"):(e[0]&&this.matchSelect(e[0].id),this.cateDialogType="添加类别",this.handlerItemCateDialog=!0)},matchSelect(e){for(var t=this.searchList,a=0,r=t.length;a<r;a++)t[a].id==e&&(this.itemCateForm.parent=t[a])},editChecked(){const e=this.$refs.cateTree.getCheckedNodes();if(1!=e.length)this.$message.error("请选中一个要编辑的类别");else{const t=e[0];this.itemCateForm.id=t.id,this.itemCateForm.name=t.name,t.parent&&this.matchSelect(t.parent.id),this.itemCateForm.children=t.children,this.itemCateForm.sortIndex=t.sortIndex,this.cateDialogType="编辑类别",this.handlerItemCateDialog=!0}},deleteChecked(){1!=this.$refs.cateTree.getCheckedNodes().length?this.$message.error("请选择一个要删除的类别"):this.$confirm("考虑考虑呗？删除后可能会影响类别相关的数据呀","提示",{confirmButtonText:"听我的",cancelButtonText:"算你狠",type:"warning"}).then(()=>{this.$notify({title:"成功",message:"操作成功！",type:"success"})}).catch(()=>{})},resetChecked(){this.$refs.cateTree.setCheckedKeys([])},resetCateDialog(){this.itemCateForm={id:null,parent:{id:null,name:null},name:null,sortIndex:1}},handlerConfirm(){this.itemCateForm.id;const e=this.itemCateForm.parent;e&&(this.itemCateForm.parentId=e.id,this.itemCateForm.parentName=e.name),this.$notify({title:"成功",message:"操作成功！",type:"success"})},handlerSelect(e){e&&this.getSelectCateId(e)},getSelectCateId(e){let t=this.searchList;for(var a=0,r=t.length;a<r;a++){var i=t[a];e==i.name&&(this.itemCateForm.parent.id=i.id)}},append(e,t){e.append({id:r++,label:"testtest",children:[]},t)},remove(e,t){e.remove(t)},filterNode:(e,t)=>!e||-1!==t.name.indexOf(e)}}}});